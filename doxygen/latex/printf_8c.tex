\hypertarget{printf_8c}{\section{printf/printf.c File Reference}
\label{printf_8c}\index{printf/printf.\-c@{printf/printf.\-c}}
}


Small printf, and verious conversion code with floating point support.  


{\ttfamily \#include \char`\"{}user\-\_\-config.\-h\char`\"{}}\\*
{\ttfamily \#include $<$stdarg.\-h$>$}\\*
{\ttfamily \#include $<$math.\-h$>$}\\*
{\ttfamily \#include \char`\"{}printf.\-h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{printf_8c_ae8690abbffa85934d64d545920e2b108}{F\-L\-O\-A\-T}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\-E\-M\-S\-P\-A\-C\-E} int \hyperlink{printf_8c_a2f4b30f6ffa8d7b04ede343a1bfdcbf5}{t\-\_\-itoa} (long num, \hyperlink{send_8c_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} $\ast$str, int max, int prec, int sign)
\begin{DoxyCompactList}\small\item\em Convert number to A\-S\-C\-I\-I returns size of string after conversion Note\-: It is allowed to have more digits converted then prec defines Like itoa but can support leading '+/-\// ' or unsigned and zero padding. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\-E\-M\-S\-P\-A\-C\-E} int \hyperlink{printf_8c_a39d7df31096f07eba5176fad5a2337f4}{t\-\_\-ntoa} (unsigned long num, \hyperlink{send_8c_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} $\ast$str, int max, int radix, int prec)
\begin{DoxyCompactList}\small\item\em Convert number to A\-S\-C\-I\-I Like itoa but can support leading '+/-\// ' or unsigned and zero padding Note\-: It is allowed to have more digits converted then prec defines. \end{DoxyCompactList}\item 
static \hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\-E\-M\-S\-P\-A\-C\-E} double \hyperlink{printf_8c_ae517abe6b3eca804cfda72648f15be21}{t\-\_\-iexp} (double num, int exp)
\begin{DoxyCompactList}\small\item\em Raise number to exponent power (exponent is integer) \end{DoxyCompactList}\item 
static \hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\-E\-M\-S\-P\-A\-C\-E} double \hyperlink{printf_8c_af738e7ee5c3c5f91edf0f5baa51bb151}{t\-\_\-scale10} (double num, int $\ast$exp)
\begin{DoxyCompactList}\small\item\em Scale a number to 1.\-0 .. 9.\-99999... \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\-E\-M\-S\-P\-A\-C\-E} int \hyperlink{printf_8c_a93b64183a7db6800f8d49160351dbe3a}{t\-\_\-ftoa} (double val, char $\ast$str, int intprec, int prec, int sign)
\begin{DoxyCompactList}\small\item\em float to A\-S\-C\-I\-I \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\-E\-M\-S\-P\-A\-C\-E} int \hyperlink{printf_8c_a81b5dc7281a404cfc4c8ee6e3da4d8da}{t\-\_\-etoa} (double x, char $\ast$str, int prec, int sign)
\begin{DoxyCompactList}\small\item\em float to A\-S\-C\-I\-I \end{DoxyCompactList}\item 
static \hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\-E\-M\-S\-P\-A\-C\-E} void \hyperlink{printf_8c_aa864d1706b7e941e7f29264cc197cbe1}{\-\_\-puts\-\_\-pad} (\hyperlink{printf_8h_a1efdee46bf8e5af45e76e461e8db9c09}{printf\-\_\-t} $\ast$fn, char $\ast$s, int width, int \hyperlink{user__main_8c_aa011065eee776eb1bda73597b5d9d5d7}{count}, int left)
\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\-E\-M\-S\-P\-A\-C\-E} void \hyperlink{printf_8c_ae8e3ea7acfe1bf7a917405584b720bb9}{\-\_\-printf\-\_\-fn} (\hyperlink{printf_8h_a1efdee46bf8e5af45e76e461e8db9c09}{printf\-\_\-t} $\ast$fn, const char $\ast$fmt, va\-\_\-list va)
\begin{DoxyCompactList}\small\item\em vsnprintf function \end{DoxyCompactList}\item 
static void \hyperlink{printf_8c_a5a97e16fdf12d434f0d93807f1a66e04}{\-\_\-putc\-\_\-buffer\-\_\-fn} (struct \hyperlink{struct__printf__t}{\-\_\-printf\-\_\-t} $\ast$p, char ch)
\begin{DoxyCompactList}\small\item\em \-\_\-putc\-\_\-buffer\-\_\-fn low level function writes a character to a buffer \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\-E\-M\-S\-P\-A\-C\-E} int \hyperlink{printf_8c_a7a6349b4ca3388a0cb82fc3d1d85a6b5}{vsnprintf} (char $\ast$str, size\-\_\-t size, const char $\ast$format, va\-\_\-list va)
\begin{DoxyCompactList}\small\item\em vsnprintf function \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\-E\-M\-S\-P\-A\-C\-E} int \hyperlink{printf_8c_a278630a290b34d009b2e3ad7bf1fc996}{snprintf} (char $\ast$str, size\-\_\-t size, const char $\ast$format,...)
\begin{DoxyCompactList}\small\item\em snprintf function \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Small printf, and verious conversion code with floating point support. \begin{DoxyParagraph}{Copyright \copyright{} 2015 Mike Gore, G\-P\-L License}

\end{DoxyParagraph}
\begin{DoxyParagraph}{You are free to use this code under the terms of G\-P\-L}
please retain a copy of this notice in any code you use it in.
\end{DoxyParagraph}
This is free software\-: you can redistribute it and/or modify it under the terms of the G\-N\-U General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

This software is distributed in the hope that it will be useful, but W\-I\-T\-H\-O\-U\-T A\-N\-Y W\-A\-R\-R\-A\-N\-T\-Y; without even the implied warranty of M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y or F\-I\-T\-N\-E\-S\-S F\-O\-R A P\-A\-R\-T\-I\-C\-U\-L\-A\-R P\-U\-R\-P\-O\-S\-E. See the G\-N\-U General Public License for more details.

You should have received a copy of the G\-N\-U General Public License along with this program. If not, see \href{http://www.gnu.org/licenses/}{\tt http\-://www.\-gnu.\-org/licenses/}. 

Definition in file \hyperlink{printf_8c_source}{printf.\-c}.



\subsection{Macro Definition Documentation}
\hypertarget{printf_8c_ae8690abbffa85934d64d545920e2b108}{\index{printf.\-c@{printf.\-c}!F\-L\-O\-A\-T@{F\-L\-O\-A\-T}}
\index{F\-L\-O\-A\-T@{F\-L\-O\-A\-T}!printf.c@{printf.\-c}}
\subsubsection[{F\-L\-O\-A\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define F\-L\-O\-A\-T}}\label{printf_8c_ae8690abbffa85934d64d545920e2b108}


Definition at line 27 of file printf.\-c.



\subsection{Function Documentation}
\hypertarget{printf_8c_ae8e3ea7acfe1bf7a917405584b720bb9}{\index{printf.\-c@{printf.\-c}!\-\_\-printf\-\_\-fn@{\-\_\-printf\-\_\-fn}}
\index{\-\_\-printf\-\_\-fn@{\-\_\-printf\-\_\-fn}!printf.c@{printf.\-c}}
\subsubsection[{\-\_\-printf\-\_\-fn}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\-E\-M\-S\-P\-A\-C\-E} void \-\_\-printf\-\_\-fn (
\begin{DoxyParamCaption}
\item[{{\bf printf\-\_\-t} $\ast$}]{fn, }
\item[{const char $\ast$}]{fmt, }
\item[{va\-\_\-list}]{va}
\end{DoxyParamCaption}
)}}\label{printf_8c_ae8e3ea7acfe1bf7a917405584b720bb9}


vsnprintf function 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em fn} & output character function pointer \\
\hline
\mbox{\tt in}  & {\em fmt} & printf forat string \\
\hline
\mbox{\tt in}  & {\em va} & va\-\_\-list arguments \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of string 
\end{DoxyReturn}


Definition at line 536 of file printf.\-c.



Referenced by tft\-\_\-printf(), uart0\-\_\-printf(), vsnprintf(), and vsock\-\_\-printf().

\hypertarget{printf_8c_a5a97e16fdf12d434f0d93807f1a66e04}{\index{printf.\-c@{printf.\-c}!\-\_\-putc\-\_\-buffer\-\_\-fn@{\-\_\-putc\-\_\-buffer\-\_\-fn}}
\index{\-\_\-putc\-\_\-buffer\-\_\-fn@{\-\_\-putc\-\_\-buffer\-\_\-fn}!printf.c@{printf.\-c}}
\subsubsection[{\-\_\-putc\-\_\-buffer\-\_\-fn}]{\setlength{\rightskip}{0pt plus 5cm}static void \-\_\-putc\-\_\-buffer\-\_\-fn (
\begin{DoxyParamCaption}
\item[{struct {\bf \-\_\-printf\-\_\-t} $\ast$}]{p, }
\item[{char}]{ch}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{printf_8c_a5a97e16fdf12d434f0d93807f1a66e04}


\-\_\-putc\-\_\-buffer\-\_\-fn low level function writes a character to a buffer 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$p} & structure with pointers and buffer to be written to \\
\hline
\mbox{\tt in}  & {\em ch} & character to place in buffer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 792 of file printf.\-c.



Referenced by vsnprintf().

\hypertarget{printf_8c_aa864d1706b7e941e7f29264cc197cbe1}{\index{printf.\-c@{printf.\-c}!\-\_\-puts\-\_\-pad@{\-\_\-puts\-\_\-pad}}
\index{\-\_\-puts\-\_\-pad@{\-\_\-puts\-\_\-pad}!printf.c@{printf.\-c}}
\subsubsection[{\-\_\-puts\-\_\-pad}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf M\-E\-M\-S\-P\-A\-C\-E} void \-\_\-puts\-\_\-pad (
\begin{DoxyParamCaption}
\item[{{\bf printf\-\_\-t} $\ast$}]{fn, }
\item[{char $\ast$}]{s, }
\item[{int}]{width, }
\item[{int}]{count, }
\item[{int}]{left}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{printf_8c_aa864d1706b7e941e7f29264cc197cbe1}


Definition at line 483 of file printf.\-c.



Referenced by \-\_\-printf\-\_\-fn().

\hypertarget{printf_8c_a278630a290b34d009b2e3ad7bf1fc996}{\index{printf.\-c@{printf.\-c}!snprintf@{snprintf}}
\index{snprintf@{snprintf}!printf.c@{printf.\-c}}
\subsubsection[{snprintf}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\-E\-M\-S\-P\-A\-C\-E} int snprintf (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{str, }
\item[{size\-\_\-t}]{size, }
\item[{const char $\ast$}]{format, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{printf_8c_a278630a290b34d009b2e3ad7bf1fc996}


snprintf function 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em buffer} & string buffer for result \\
\hline
\mbox{\tt in}  & {\em len} & maximum length of converted string \\
\hline
\mbox{\tt in}  & {\em fmt} & printf forat string \\
\hline
\mbox{\tt in}  & {\em ...} & list of arguments \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string size 
\end{DoxyReturn}


Definition at line 846 of file printf.\-c.



Referenced by Add\-Font\-Name(), asctime\-\_\-r(), html\-\_\-msg(), ts\-\_\-to\-\_\-str(), u5toa(), and wifi\-\_\-event\-\_\-cb().

\hypertarget{printf_8c_a81b5dc7281a404cfc4c8ee6e3da4d8da}{\index{printf.\-c@{printf.\-c}!t\-\_\-etoa@{t\-\_\-etoa}}
\index{t\-\_\-etoa@{t\-\_\-etoa}!printf.c@{printf.\-c}}
\subsubsection[{t\-\_\-etoa}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\-E\-M\-S\-P\-A\-C\-E} int t\-\_\-etoa (
\begin{DoxyParamCaption}
\item[{double}]{x, }
\item[{char $\ast$}]{str, }
\item[{int}]{prec, }
\item[{int}]{sign}
\end{DoxyParamCaption}
)}}\label{printf_8c_a81b5dc7281a404cfc4c8ee6e3da4d8da}


float to A\-S\-C\-I\-I 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em x} & value \\
\hline
\mbox{\tt in}  & {\em str} & converted string \\
\hline
\mbox{\tt in}  & {\em prec} & digits after decimal place \\
\hline
\mbox{\tt in}  & {\em sign} & sign \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of string 
\end{DoxyReturn}


Definition at line 382 of file printf.\-c.



Referenced by \-\_\-printf\-\_\-fn().

\hypertarget{printf_8c_a93b64183a7db6800f8d49160351dbe3a}{\index{printf.\-c@{printf.\-c}!t\-\_\-ftoa@{t\-\_\-ftoa}}
\index{t\-\_\-ftoa@{t\-\_\-ftoa}!printf.c@{printf.\-c}}
\subsubsection[{t\-\_\-ftoa}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\-E\-M\-S\-P\-A\-C\-E} int t\-\_\-ftoa (
\begin{DoxyParamCaption}
\item[{double}]{val, }
\item[{char $\ast$}]{str, }
\item[{int}]{intprec, }
\item[{int}]{prec, }
\item[{int}]{sign}
\end{DoxyParamCaption}
)}}\label{printf_8c_a93b64183a7db6800f8d49160351dbe3a}


float to A\-S\-C\-I\-I 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em val} & value \\
\hline
\mbox{\tt in}  & {\em str} & converted string \\
\hline
\mbox{\tt in}  & {\em intprec} & integer precision \\
\hline
\mbox{\tt in}  & {\em prec} & precision \\
\hline
\mbox{\tt in}  & {\em sign} & sign \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of string 
\end{DoxyReturn}


Definition at line 276 of file printf.\-c.



Referenced by \-\_\-printf\-\_\-fn().

\hypertarget{printf_8c_ae517abe6b3eca804cfda72648f15be21}{\index{printf.\-c@{printf.\-c}!t\-\_\-iexp@{t\-\_\-iexp}}
\index{t\-\_\-iexp@{t\-\_\-iexp}!printf.c@{printf.\-c}}
\subsubsection[{t\-\_\-iexp}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf M\-E\-M\-S\-P\-A\-C\-E} double t\-\_\-iexp (
\begin{DoxyParamCaption}
\item[{double}]{num, }
\item[{int}]{exp}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{printf_8c_ae517abe6b3eca804cfda72648f15be21}


Raise number to exponent power (exponent is integer) 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em num} & number \\
\hline
\mbox{\tt in}  & {\em exp} & interger exponent \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
num $\ast$$\ast$ exp 
\end{DoxyReturn}


Definition at line 199 of file printf.\-c.



Referenced by t\-\_\-ftoa(), and t\-\_\-scale10().

\hypertarget{printf_8c_a2f4b30f6ffa8d7b04ede343a1bfdcbf5}{\index{printf.\-c@{printf.\-c}!t\-\_\-itoa@{t\-\_\-itoa}}
\index{t\-\_\-itoa@{t\-\_\-itoa}!printf.c@{printf.\-c}}
\subsubsection[{t\-\_\-itoa}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\-E\-M\-S\-P\-A\-C\-E} int t\-\_\-itoa (
\begin{DoxyParamCaption}
\item[{long}]{num, }
\item[{{\bf uint8\-\_\-t} $\ast$}]{str, }
\item[{int}]{max, }
\item[{int}]{prec, }
\item[{int}]{sign}
\end{DoxyParamCaption}
)}}\label{printf_8c_a2f4b30f6ffa8d7b04ede343a1bfdcbf5}


Convert number to A\-S\-C\-I\-I returns size of string after conversion Note\-: It is allowed to have more digits converted then prec defines Like itoa but can support leading '+/-\// ' or unsigned and zero padding. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em num} & number \\
\hline
\mbox{\tt out}  & {\em $\ast$str} & string \\
\hline
\mbox{\tt in}  & {\em max} & maximum length or string \\
\hline
\mbox{\tt in}  & {\em prec} & minumum number of digits, 0 padded if needed (can be zero) \\
\hline
\mbox{\tt in}  & {\em sign} & 2\-: -\/ or +, 1\-: -\/, 0\-: unsigned N\-O\-T counted as part of prec length (just like printf) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
long value 
\end{DoxyReturn}


Definition at line 61 of file printf.\-c.



Referenced by \-\_\-printf\-\_\-fn(), and t\-\_\-ftoa().

\hypertarget{printf_8c_a39d7df31096f07eba5176fad5a2337f4}{\index{printf.\-c@{printf.\-c}!t\-\_\-ntoa@{t\-\_\-ntoa}}
\index{t\-\_\-ntoa@{t\-\_\-ntoa}!printf.c@{printf.\-c}}
\subsubsection[{t\-\_\-ntoa}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\-E\-M\-S\-P\-A\-C\-E} int t\-\_\-ntoa (
\begin{DoxyParamCaption}
\item[{unsigned long}]{num, }
\item[{{\bf uint8\-\_\-t} $\ast$}]{str, }
\item[{int}]{max, }
\item[{int}]{radix, }
\item[{int}]{prec}
\end{DoxyParamCaption}
)}}\label{printf_8c_a39d7df31096f07eba5176fad5a2337f4}


Convert number to A\-S\-C\-I\-I Like itoa but can support leading '+/-\// ' or unsigned and zero padding Note\-: It is allowed to have more digits converted then prec defines. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em num} & number \\
\hline
\mbox{\tt out}  & {\em $\ast$str} & string \\
\hline
\mbox{\tt in}  & {\em max} & maximum length or string \\
\hline
\mbox{\tt in}  & {\em radix} & Radix may only be 2,8,16 \\
\hline
\mbox{\tt in}  & {\em prec} & minumum number of digits, zero padded if needed N\-O\-T counted as part of prec length (just like printf) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
returns size of string 
\end{DoxyReturn}


Definition at line 138 of file printf.\-c.



Referenced by \-\_\-printf\-\_\-fn().

\hypertarget{printf_8c_af738e7ee5c3c5f91edf0f5baa51bb151}{\index{printf.\-c@{printf.\-c}!t\-\_\-scale10@{t\-\_\-scale10}}
\index{t\-\_\-scale10@{t\-\_\-scale10}!printf.c@{printf.\-c}}
\subsubsection[{t\-\_\-scale10}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf M\-E\-M\-S\-P\-A\-C\-E} double t\-\_\-scale10 (
\begin{DoxyParamCaption}
\item[{double}]{num, }
\item[{int $\ast$}]{exp}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{printf_8c_af738e7ee5c3c5f91edf0f5baa51bb151}


Scale a number to 1.\-0 .. 9.\-99999... 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em num} & number \\
\hline
\mbox{\tt out}  & {\em $\ast$exp} & interger power of 10 for scale factor \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
scaled number 
\end{DoxyReturn}


Definition at line 229 of file printf.\-c.



Referenced by t\-\_\-ftoa().

\hypertarget{printf_8c_a7a6349b4ca3388a0cb82fc3d1d85a6b5}{\index{printf.\-c@{printf.\-c}!vsnprintf@{vsnprintf}}
\index{vsnprintf@{vsnprintf}!printf.c@{printf.\-c}}
\subsubsection[{vsnprintf}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\-E\-M\-S\-P\-A\-C\-E} int vsnprintf (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{str, }
\item[{size\-\_\-t}]{size, }
\item[{const char $\ast$}]{format, }
\item[{va\-\_\-list}]{va}
\end{DoxyParamCaption}
)}}\label{printf_8c_a7a6349b4ca3388a0cb82fc3d1d85a6b5}


vsnprintf function 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em buffer} & string buffer for result \\
\hline
\mbox{\tt in}  & {\em len} & maximum length of converted string \\
\hline
\mbox{\tt in}  & {\em fmt} & printf forat string \\
\hline
\mbox{\tt in}  & {\em va} & va\-\_\-list list of arguments \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string size 
\end{DoxyReturn}


Definition at line 818 of file printf.\-c.



Referenced by html\-\_\-msg(), and snprintf().

