<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ESP8266 ILI9341 display support code with printf sources, wire-frame viewer and custom fonts: display/font.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ESP8266 ILI9341 display support code with printf sources, wire-frame viewer and custom fonts
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">ESP8266ILI9341DisplayProject</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e4fd3481c5e8112931e161ebbc5af0ff.html">display</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">font.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="font_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;ets_sys.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;osapi.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;os_type.h&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;gpio.h&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;mem.h&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;hspi.h&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="util_8h.html">util.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ili9341_8h.html">ili9341.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="font_8c.html#a52d60ae7ccb513718808b5cdbb26ffa3">   38</a></span>&#160;<span class="preprocessor">#define MEMSPACE_FONT ICACHE_FLASH_ATTR</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="font_8c.html#ac069b0f0b942de43fee8642c39450bab">   42</a></span>&#160;<span class="preprocessor">#define FONTSPECS</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// Font Structure defintions</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="display_2font_8h.html">font.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="display_2fonts_8h.html">fonts.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ili9341_8h.html">ili9341.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">// All the fonts - defined in fonts.h</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">extern</span> <a class="code" href="struct__font.html">_font</a> *<a class="code" href="font_8c.html#ad30601ef15ca84a341c6a7a1dc1d61b1">allfonts</a>[];</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="display_2font_8h.html#a0e5275643df2882ea470b7b4b1c9d414">   64</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="font_8c.html#a0e5275643df2882ea470b7b4b1c9d414">font_attr</a>(<span class="keywordtype">int</span> c, <a class="code" href="struct__fontc.html">_fontc</a> *f, <span class="keywordtype">int</span> index)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordtype">int</span> offset;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordtype">int</span> num;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *ptr;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keyword">extern</span> <a class="code" href="structwindow.html">window</a> <a class="code" href="ili9341_8c.html#ad4f99092b85aeca1e021fe68d605e513">win</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// check index</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="struct__font.html">_font</a> *z = allfonts[index];</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="struct__fontspecs.html">_fontspecs</a> s;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    num = c - z-&gt;<a class="code" href="struct__font.html#a73decb2a2c2880dc782cd9cda5561876">First</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span>(num &lt; 0 || num &gt;= z-&gt;<a class="code" href="struct__font.html#a1e89c06fc11a730eb602522dc8953491">Glyphs</a>)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">return</span>(-1);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    f-&gt;<a class="code" href="struct__fontc.html#a60a3fef5ccd80dff543aac3f22f74876">ptr</a> = z-&gt;<a class="code" href="struct__font.html#a336f543c3fe3d3197c6e709fa7df0f5b">bitmap</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">// If we have font specifications use them</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span>(z-&gt;<a class="code" href="struct__font.html#a76b5b07cf75a869627eca27d7a32836a">specs</a>)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#ae3c802e1c35ae9a4e37c8eb2e9644325">Width</a> = z-&gt;<a class="code" href="struct__font.html#ae3d3b48670f1bf4bf6dbf42794f81b31">Width</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#a98f97c237dfb1027c38813a17ef6dcd6">Height</a> = z-&gt;<a class="code" href="struct__font.html#a5888921d1a78bf917351a275e2033467">Height</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">// Copy the full font specification into ram for easy access</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">// This does not use much memory as it does not include the bitmap</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="util_8c.html#a9a70a218c9d4bae2e51bda4d7219712f">cpy_flash</a>((uint8_t *)&amp;(z-&gt;<a class="code" href="struct__font.html#a76b5b07cf75a869627eca27d7a32836a">specs</a>[num]), (uint8_t *)&amp;s,<span class="keyword">sizeof</span>(<a class="code" href="struct__fontspecs.html">_fontspecs</a>));</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#a9c2af0354d2b2009e7b6684e25fd479b">w</a> = s.<a class="code" href="struct__fontspecs.html#a8404888a24a2b065d91c4424e1907439">Width</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#a9feb8c838dfc1d4eebb15c8e53981944">h</a> = s.<a class="code" href="struct__fontspecs.html#a33e92e50bd86f34db768e027e4736089">Height</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#ad15d00ed46ebe52a085cf05b5ca5da90">x</a> = s.<a class="code" href="struct__fontspecs.html#a7273a891c79308389718266cb0b66f56">X</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#aebbde0dc41068722ee1a69f4a56478a4">y</a> = s.<a class="code" href="struct__fontspecs.html#a9771541eab33755d22c804f3bedf8682">Y</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        offset = s.<a class="code" href="struct__fontspecs.html#ad4ef5755b58ecd3bbc9894cee258091e">Offset</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#a60a3fef5ccd80dff543aac3f22f74876">ptr</a> += offset;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">// Override only if we have specs</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#aec700f6ada95d1bced81fc2728633878">fixed</a> = win.<a class="code" href="structwindow.html#a5afd09eaf1e9c22fa611f0f529177ac9">fontfixed</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span>(f-&gt;<a class="code" href="struct__fontc.html#aec700f6ada95d1bced81fc2728633878">fixed</a>)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            f-&gt;<a class="code" href="struct__fontc.html#a38c23e7e200346fce3777d4efa30488f">gap</a> = f-&gt;<a class="code" href="struct__fontc.html#ae3c802e1c35ae9a4e37c8eb2e9644325">Width</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            f-&gt;<a class="code" href="struct__fontc.html#a38c23e7e200346fce3777d4efa30488f">gap</a> = f-&gt;<a class="code" href="struct__fontc.html#a9c2af0354d2b2009e7b6684e25fd479b">w</a> + (f-&gt;<a class="code" href="struct__fontc.html#ae3c802e1c35ae9a4e37c8eb2e9644325">Width</a>+3)/4;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">else</span>                                          <span class="comment">// Create the font specificatio for the main font spec</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#ae3c802e1c35ae9a4e37c8eb2e9644325">Width</a> = z-&gt;<a class="code" href="struct__font.html#ae3d3b48670f1bf4bf6dbf42794f81b31">Width</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#a98f97c237dfb1027c38813a17ef6dcd6">Height</a> = z-&gt;<a class="code" href="struct__font.html#a5888921d1a78bf917351a275e2033467">Height</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#a38c23e7e200346fce3777d4efa30488f">gap</a> = f-&gt;<a class="code" href="struct__fontc.html#a9c2af0354d2b2009e7b6684e25fd479b">w</a> + (f-&gt;<a class="code" href="struct__fontc.html#ae3c802e1c35ae9a4e37c8eb2e9644325">Width</a>+3)/4;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#a9c2af0354d2b2009e7b6684e25fd479b">w</a> = z-&gt;<a class="code" href="struct__font.html#ae3d3b48670f1bf4bf6dbf42794f81b31">Width</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#a9feb8c838dfc1d4eebb15c8e53981944">h</a> = z-&gt;<a class="code" href="struct__font.html#a5888921d1a78bf917351a275e2033467">Height</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#ad15d00ed46ebe52a085cf05b5ca5da90">x</a> = 0;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#aebbde0dc41068722ee1a69f4a56478a4">y</a> = 0;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        offset = ((z-&gt;<a class="code" href="struct__font.html#ae3d3b48670f1bf4bf6dbf42794f81b31">Width</a> * z-&gt;<a class="code" href="struct__font.html#a5888921d1a78bf917351a275e2033467">Height</a>)+7)/8;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        f-&gt;<a class="code" href="struct__fontc.html#a60a3fef5ccd80dff543aac3f22f74876">ptr</a> += (offset * num);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">#ifdef ILI9341_DEBUG</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor"></span>    <a class="code" href="user__main_8c.html#af84e3ac8b5878bd0ad9e185f3d27073c">ets_uart_printf</a>(<span class="stringliteral">&quot;c: %02x ind:%d w:%d h:%d x:%d y:%d gap:%d, W:%d, H:%d\r\n&quot;</span>,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        0xff &amp; c, 0xff &amp; index, f-&gt;<a class="code" href="struct__fontc.html#a9c2af0354d2b2009e7b6684e25fd479b">w</a>, f-&gt;<a class="code" href="struct__fontc.html#a9feb8c838dfc1d4eebb15c8e53981944">h</a>, f-&gt;<a class="code" href="struct__fontc.html#ad15d00ed46ebe52a085cf05b5ca5da90">x</a>, f-&gt;<a class="code" href="struct__fontc.html#aebbde0dc41068722ee1a69f4a56478a4">y</a>, f-&gt;<a class="code" href="struct__fontc.html#a38c23e7e200346fce3777d4efa30488f">gap</a>, f-&gt;<a class="code" href="struct__fontc.html#ae3c802e1c35ae9a4e37c8eb2e9644325">Width</a>, f-&gt;<a class="code" href="struct__fontc.html#a98f97c237dfb1027c38813a17ef6dcd6">Height</a>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">return</span>(index);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="display_2font_8h.html#aa2cba7065a29fc9f7918e345d3947795">  138</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="font_8c.html#aa2cba7065a29fc9f7918e345d3947795">tft_drawChar</a>(uint8_t c, uint16_t x, uint16_t y, uint8_t index)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="struct__fontc.html">_fontc</a> f;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordtype">int</span> yskip;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keyword">extern</span> <a class="code" href="structwindow.html">window</a> <a class="code" href="ili9341_8c.html#ad4f99092b85aeca1e021fe68d605e513">win</a>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    ret = <a class="code" href="font_8c.html#a0e5275643df2882ea470b7b4b1c9d414">font_attr</a>(c, &amp;f, index);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span>(ret &lt; 0)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">return</span> (0);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span>(!f.<a class="code" href="struct__fontc.html#a9feb8c838dfc1d4eebb15c8e53981944">h</a> || !f.<a class="code" href="struct__fontc.html#a9c2af0354d2b2009e7b6684e25fd479b">w</a>)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span> (0);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">// Alternate clear - all pixels inside the font bounding box</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span>(f.<a class="code" href="struct__fontc.html#a9feb8c838dfc1d4eebb15c8e53981944">h</a> != f.<a class="code" href="struct__fontc.html#a98f97c237dfb1027c38813a17ef6dcd6">Height</a> ||  f.<a class="code" href="struct__fontc.html#a9c2af0354d2b2009e7b6684e25fd479b">w</a> != f.<a class="code" href="struct__fontc.html#ae3c802e1c35ae9a4e37c8eb2e9644325">Width</a> || f.<a class="code" href="struct__fontc.html#ad15d00ed46ebe52a085cf05b5ca5da90">x</a> != 0 || f.<a class="code" href="struct__fontc.html#aebbde0dc41068722ee1a69f4a56478a4">y</a> != 0)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="ili9341_8c.html#af55ea4b801cd778035f4b595ce2589a2">tft_fillRectWH</a>(x, y, f.<a class="code" href="struct__fontc.html#ae3c802e1c35ae9a4e37c8eb2e9644325">Width</a>, f.<a class="code" href="struct__fontc.html#a98f97c237dfb1027c38813a17ef6dcd6">Height</a>, win.<a class="code" href="structwindow.html#ae49a3c2629ffa093e60edc3f9e9e0917">textbgcolor</a>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">// top of bit bounding box ( first row with a 1 bit in it)</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    yskip = f.<a class="code" href="struct__fontc.html#a98f97c237dfb1027c38813a17ef6dcd6">Height</a> - (f.<a class="code" href="struct__fontc.html#aebbde0dc41068722ee1a69f4a56478a4">y</a>+f.<a class="code" href="struct__fontc.html#a9feb8c838dfc1d4eebb15c8e53981944">h</a>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="ili9341_8c.html#a4a5ba68123d8ed8c0ba3f4b512f842f8">tft_bit_blit</a>(f.<a class="code" href="struct__fontc.html#a60a3fef5ccd80dff543aac3f22f74876">ptr</a>, x+f.<a class="code" href="struct__fontc.html#ad15d00ed46ebe52a085cf05b5ca5da90">x</a>, y+yskip, f.<a class="code" href="struct__fontc.html#a9c2af0354d2b2009e7b6684e25fd479b">w</a>, f.<a class="code" href="struct__fontc.html#a9feb8c838dfc1d4eebb15c8e53981944">h</a>, win.<a class="code" href="structwindow.html#aca878bb381210ef2ef8d764d08b126ae">textcolor</a>, win.<a class="code" href="structwindow.html#ae49a3c2629ffa093e60edc3f9e9e0917">textbgcolor</a>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">return</span> (f.<a class="code" href="struct__fontc.html#a38c23e7e200346fce3777d4efa30488f">gap</a>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
<div class="ttc" id="structwindow_html_aca878bb381210ef2ef8d764d08b126ae"><div class="ttname"><a href="structwindow.html#aca878bb381210ef2ef8d764d08b126ae">window::textcolor</a></div><div class="ttdeci">uint16_t textcolor</div><div class="ttdef"><b>Definition:</b> <a href="ili9341_8h_source.html#l00046">ili9341.h:46</a></div></div>
<div class="ttc" id="util_8c_html_a9a70a218c9d4bae2e51bda4d7219712f"><div class="ttname"><a href="util_8c.html#a9a70a218c9d4bae2e51bda4d7219712f">cpy_flash</a></div><div class="ttdeci">void cpy_flash(uint8_t *src, uint8_t *dest, int size)</div><div class="ttdoc">Copy data from Flash to Ram Uses flash_read8() to avoid alighnment problems. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00082">util.c:82</a></div></div>
<div class="ttc" id="ili9341_8c_html_ad4f99092b85aeca1e021fe68d605e513"><div class="ttname"><a href="ili9341_8c.html#ad4f99092b85aeca1e021fe68d605e513">win</a></div><div class="ttdeci">window win</div><div class="ttdef"><b>Definition:</b> <a href="ili9341_8c_source.html#l00042">ili9341.c:42</a></div></div>
<div class="ttc" id="struct__fontc_html_a9c2af0354d2b2009e7b6684e25fd479b"><div class="ttname"><a href="struct__fontc.html#a9c2af0354d2b2009e7b6684e25fd479b">_fontc::w</a></div><div class="ttdeci">int8_t w</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00089">font.h:89</a></div></div>
<div class="ttc" id="struct__fontc_html_ae3c802e1c35ae9a4e37c8eb2e9644325"><div class="ttname"><a href="struct__fontc.html#ae3c802e1c35ae9a4e37c8eb2e9644325">_fontc::Width</a></div><div class="ttdeci">int8_t Width</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00093">font.h:93</a></div></div>
<div class="ttc" id="struct__font_html_a336f543c3fe3d3197c6e709fa7df0f5b"><div class="ttname"><a href="struct__font.html#a336f543c3fe3d3197c6e709fa7df0f5b">_font::bitmap</a></div><div class="ttdeci">uint8_t * bitmap</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00080">font.h:80</a></div></div>
<div class="ttc" id="struct__fontc_html_a9feb8c838dfc1d4eebb15c8e53981944"><div class="ttname"><a href="struct__fontc.html#a9feb8c838dfc1d4eebb15c8e53981944">_fontc::h</a></div><div class="ttdeci">int8_t h</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00090">font.h:90</a></div></div>
<div class="ttc" id="struct__fontspecs_html_a8404888a24a2b065d91c4424e1907439"><div class="ttname"><a href="struct__fontspecs.html#a8404888a24a2b065d91c4424e1907439">_fontspecs::Width</a></div><div class="ttdeci">uint8_t Width</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00049">font.h:49</a></div></div>
<div class="ttc" id="struct__fontc_html_aebbde0dc41068722ee1a69f4a56478a4"><div class="ttname"><a href="struct__fontc.html#aebbde0dc41068722ee1a69f4a56478a4">_fontc::y</a></div><div class="ttdeci">int8_t y</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00092">font.h:92</a></div></div>
<div class="ttc" id="ili9341_8c_html_af55ea4b801cd778035f4b595ce2589a2"><div class="ttname"><a href="ili9341_8c.html#af55ea4b801cd778035f4b595ce2589a2">tft_fillRectWH</a></div><div class="ttdeci">void tft_fillRectWH(int16_t x, int16_t y, int16_t w, int16_t h, uint16_t color)</div><div class="ttdoc">Fill functions </div><div class="ttdef"><b>Definition:</b> <a href="ili9341_8c_source.html#l00800">ili9341.c:800</a></div></div>
<div class="ttc" id="font_8c_html_aa2cba7065a29fc9f7918e345d3947795"><div class="ttname"><a href="font_8c.html#aa2cba7065a29fc9f7918e345d3947795">tft_drawChar</a></div><div class="ttdeci">int tft_drawChar(uint8_t c, uint16_t x, uint16_t y, uint8_t index)</div><div class="ttdoc">Display a character using font tables. </div><div class="ttdef"><b>Definition:</b> <a href="font_8c_source.html#l00138">font.c:138</a></div></div>
<div class="ttc" id="display_2fonts_8h_html"><div class="ttname"><a href="display_2fonts_8h.html">fonts.h</a></div></div>
<div class="ttc" id="struct__font_html_a5888921d1a78bf917351a275e2033467"><div class="ttname"><a href="struct__font.html#a5888921d1a78bf917351a275e2033467">_font::Height</a></div><div class="ttdeci">uint8_t Height</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00073">font.h:73</a></div></div>
<div class="ttc" id="struct__fontc_html_ad15d00ed46ebe52a085cf05b5ca5da90"><div class="ttname"><a href="struct__fontc.html#ad15d00ed46ebe52a085cf05b5ca5da90">_fontc::x</a></div><div class="ttdeci">int8_t x</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00091">font.h:91</a></div></div>
<div class="ttc" id="struct__fontspecs_html_ad4ef5755b58ecd3bbc9894cee258091e"><div class="ttname"><a href="struct__fontspecs.html#ad4ef5755b58ecd3bbc9894cee258091e">_fontspecs::Offset</a></div><div class="ttdeci">int Offset</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00048">font.h:48</a></div></div>
<div class="ttc" id="struct__fontspecs_html_a9771541eab33755d22c804f3bedf8682"><div class="ttname"><a href="struct__fontspecs.html#a9771541eab33755d22c804f3bedf8682">_fontspecs::Y</a></div><div class="ttdeci">int8_t Y</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00052">font.h:52</a></div></div>
<div class="ttc" id="struct__font_html_a76b5b07cf75a869627eca27d7a32836a"><div class="ttname"><a href="struct__font.html#a76b5b07cf75a869627eca27d7a32836a">_font::specs</a></div><div class="ttdeci">_fontspecs * specs</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00081">font.h:81</a></div></div>
<div class="ttc" id="structwindow_html_ae49a3c2629ffa093e60edc3f9e9e0917"><div class="ttname"><a href="structwindow.html#ae49a3c2629ffa093e60edc3f9e9e0917">window::textbgcolor</a></div><div class="ttdeci">uint16_t textbgcolor</div><div class="ttdef"><b>Definition:</b> <a href="ili9341_8h_source.html#l00047">ili9341.h:47</a></div></div>
<div class="ttc" id="struct__fontc_html_a60a3fef5ccd80dff543aac3f22f74876"><div class="ttname"><a href="struct__fontc.html#a60a3fef5ccd80dff543aac3f22f74876">_fontc::ptr</a></div><div class="ttdeci">uint8_t * ptr</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00096">font.h:96</a></div></div>
<div class="ttc" id="font_8c_html_a0e5275643df2882ea470b7b4b1c9d414"><div class="ttname"><a href="font_8c.html#a0e5275643df2882ea470b7b4b1c9d414">font_attr</a></div><div class="ttdeci">int font_attr(int c, _fontc *f, int index)</div><div class="ttdoc">Get font attributes for a font. </div><div class="ttdef"><b>Definition:</b> <a href="font_8c_source.html#l00064">font.c:64</a></div></div>
<div class="ttc" id="util_8h_html"><div class="ttname"><a href="util_8h.html">util.h</a></div><div class="ttdoc">Flash and bit utilities. </div></div>
<div class="ttc" id="struct__fontspecs_html_a7273a891c79308389718266cb0b66f56"><div class="ttname"><a href="struct__fontspecs.html#a7273a891c79308389718266cb0b66f56">_fontspecs::X</a></div><div class="ttdeci">int8_t X</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00051">font.h:51</a></div></div>
<div class="ttc" id="font_8c_html_ad30601ef15ca84a341c6a7a1dc1d61b1"><div class="ttname"><a href="font_8c.html#ad30601ef15ca84a341c6a7a1dc1d61b1">allfonts</a></div><div class="ttdeci">_font * allfonts[]</div><div class="ttdoc">Generated Font table / Note the generated tables always include / Font specifications: widt...</div><div class="ttdef"><b>Definition:</b> <a href="display_2fonts_8h_source.html#l18073">fonts.h:18073</a></div></div>
<div class="ttc" id="struct__fontspecs_html_a33e92e50bd86f34db768e027e4736089"><div class="ttname"><a href="struct__fontspecs.html#a33e92e50bd86f34db768e027e4736089">_fontspecs::Height</a></div><div class="ttdeci">uint8_t Height</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00050">font.h:50</a></div></div>
<div class="ttc" id="structwindow_html_a5afd09eaf1e9c22fa611f0f529177ac9"><div class="ttname"><a href="structwindow.html#a5afd09eaf1e9c22fa611f0f529177ac9">window::fontfixed</a></div><div class="ttdeci">uint16_t fontfixed</div><div class="ttdef"><b>Definition:</b> <a href="ili9341_8h_source.html#l00039">ili9341.h:39</a></div></div>
<div class="ttc" id="ili9341_8c_html_a4a5ba68123d8ed8c0ba3f4b512f842f8"><div class="ttname"><a href="ili9341_8c.html#a4a5ba68123d8ed8c0ba3f4b512f842f8">tft_bit_blit</a></div><div class="ttdeci">void tft_bit_blit(uint8_t *ptr, int x, int y, int w, int h, uint16_t fg, uint16_t bg)</div><div class="ttdoc">BLIT functions </div><div class="ttdef"><b>Definition:</b> <a href="ili9341_8c_source.html#l00543">ili9341.c:543</a></div></div>
<div class="ttc" id="struct__font_html_a73decb2a2c2880dc782cd9cda5561876"><div class="ttname"><a href="struct__font.html#a73decb2a2c2880dc782cd9cda5561876">_font::First</a></div><div class="ttdeci">int16_t First</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00071">font.h:71</a></div></div>
<div class="ttc" id="struct__font_html_ae3d3b48670f1bf4bf6dbf42794f81b31"><div class="ttname"><a href="struct__font.html#ae3d3b48670f1bf4bf6dbf42794f81b31">_font::Width</a></div><div class="ttdeci">uint8_t Width</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00072">font.h:72</a></div></div>
<div class="ttc" id="struct__fontspecs_html"><div class="ttname"><a href="struct__fontspecs.html">_fontspecs</a></div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00046">font.h:46</a></div></div>
<div class="ttc" id="structwindow_html"><div class="ttname"><a href="structwindow.html">window</a></div><div class="ttdef"><b>Definition:</b> <a href="ili9341_8h_source.html#l00034">ili9341.h:34</a></div></div>
<div class="ttc" id="struct__fontc_html_a98f97c237dfb1027c38813a17ef6dcd6"><div class="ttname"><a href="struct__fontc.html#a98f97c237dfb1027c38813a17ef6dcd6">_fontc::Height</a></div><div class="ttdeci">int8_t Height</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00094">font.h:94</a></div></div>
<div class="ttc" id="user__main_8c_html_af84e3ac8b5878bd0ad9e185f3d27073c"><div class="ttname"><a href="user__main_8c.html#af84e3ac8b5878bd0ad9e185f3d27073c">ets_uart_printf</a></div><div class="ttdeci">int ets_uart_printf(const char *fmt,...)</div></div>
<div class="ttc" id="display_2font_8h_html"><div class="ttname"><a href="display_2font_8h.html">font.h</a></div></div>
<div class="ttc" id="ili9341_8h_html"><div class="ttname"><a href="ili9341_8h.html">ili9341.h</a></div></div>
<div class="ttc" id="struct__font_html_a1e89c06fc11a730eb602522dc8953491"><div class="ttname"><a href="struct__font.html#a1e89c06fc11a730eb602522dc8953491">_font::Glyphs</a></div><div class="ttdeci">int16_t Glyphs</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00069">font.h:69</a></div></div>
<div class="ttc" id="struct__fontc_html_a38c23e7e200346fce3777d4efa30488f"><div class="ttname"><a href="struct__fontc.html#a38c23e7e200346fce3777d4efa30488f">_fontc::gap</a></div><div class="ttdeci">int8_t gap</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00095">font.h:95</a></div></div>
<div class="ttc" id="struct__fontc_html"><div class="ttname"><a href="struct__fontc.html">_fontc</a></div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00085">font.h:85</a></div></div>
<div class="ttc" id="struct__font_html"><div class="ttname"><a href="struct__font.html">_font</a></div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00067">font.h:67</a></div></div>
<div class="ttc" id="struct__fontc_html_aec700f6ada95d1bced81fc2728633878"><div class="ttname"><a href="struct__fontc.html#aec700f6ada95d1bced81fc2728633878">_fontc::fixed</a></div><div class="ttdeci">int8_t fixed</div><div class="ttdef"><b>Definition:</b> <a href="display_2font_8h_source.html#l00088">font.h:88</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jun 1 2015 23:54:42 for ESP8266 ILI9341 display support code with printf sources, wire-frame viewer and custom fonts by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
